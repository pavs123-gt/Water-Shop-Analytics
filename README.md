# ðŸ’§ Water Shop Monitoring & Analytics System
### CCTV-Based Customer, Payment & Operational Analytics
The **Water Shop Monitoring & Analytics System** automates customer tracking and operational analytics using computer vision and data analytics.
The system identifies customers using **facial recognition**, tracks visit frequency, links transactions, detects unpaid customers, and analyzes peak business hours.

---

## Table of Contents
- [Project Overview](#project-overview)
- [Objectives](#objectives)
- [Features](#features)
- [Dataset Format](#dataset-format)
- [Project Structure](#project-structure)
- [Setup & Installation](#setup--installation)
- [Processing Pipeline](#processing-pipeline)
- [Analytics & Reports](#analytics--reports)
- [Dashboard & Visualization](#dashboard--visualization)
- [Tools Used](#tools-used)
- [Future Enhancements](#future-enhancements)
- [Author](#author)
 

---

##  Project Overview
The **Water Shop Monitoring & Analytics System** automates customer tracking and operational analytics using computer vision and data analytics.

The system identifies customers using **facial recognition**, tracks visit frequency, links transactions, detects unpaid customers, and analyzes peak business hours.

---

##  Objectives
- Identify customers using CCTV footage and facial recognition  
- Assign unique customer IDs  
- Track visit frequency per customer  
- Analyze payment methods (Cash / UPI / Coins)  
- Track water can usage and sales  
- Detect unpaid and repeat defaulters  
- Identify peak and idle business hours  
- Generate automated reports  

---

## Features
- Face detection and recognition from CCTV videos  
- Customer visit tracking and repeat analysis  
- Transaction and payment mode analytics  
- Can size and quantity tracking (10L, 20L, etc.)  
- Unpaid customer identification  
- Staff optimization using traffic analysis  
- Automated shop opening and closing time detection  
- Dashboard-based visualization  

---

## Dataset Format

### CCTV Footage
The CCTV footage used in this project is a **single continuous video of approximately 2 hours**, captured during normal water shop operating hours and **provided directly by the shop manager**.

ðŸ“¹ **CCTV Video File:**  
ðŸ‘‰ [Download CCTV Footage](./dataset/cctv_footage.mp4)

- Used for customer detection, face recognition, and visit tracking  
- Captured from a fixed camera inside the shop  
- Represents real customer activity  

---
### Transaction Data
The transaction data used in this project is stored in a CSV file generated manually using a Python script to simulate real water shop transactions.

ðŸ“„ **Transaction Dataset:**  
ðŸ‘‰ [View sample_transactions.csv](https://github.com/pavs123-gt/Water-Shop-Analytics/blob/main/sample_transactions.csv)

The `sample_transactions.csv` file contains **one row per customer transaction** and includes the following fields:

| Column Name        | Description |
|--------------------|-------------|
| transaction_id     | Unique ID for each transaction |
| timestamp          | Date and time of the transaction |
| customer_id        | Unique ID assigned to the customer |
| payment_mode       | Mode of payment (Cash / UPI / Coin) |
| can_size           | Size of water can (10L / 20L) |
| number_of_cans     | Number of cans purchased |
| amount             | Total transaction amount |
| payment_status     | Paid or Unpaid |

This dataset is used for:
- Payment mode analysis  
- Customer purchase behavior analysis  
- Unpaid and defaulter identification  
- Daily and monthly revenue analytics  

---

### Transaction Data Generation
The transaction dataset is generated by running the following Python script:

```bash
python general_sample_transaction.py



---
WaterShopSystem/
â”œâ”€â”€ cctv.mp4
â”œâ”€â”€ generate_sample_transaction.py           # Generates sample_transaction.csv
â”œâ”€â”€ sample_transaction.csv                   # Generated file
â”œâ”€â”€ detection.py                             # Generates frames and detected_faces
â”œâ”€â”€ frames/                                  # Generated frames from video
â”œâ”€â”€ detected_faces/                          # Cropped faces from frames
â”œâ”€â”€ face_recognition_pipeline.py             # Generates customer_embeddings.pkl and recognition results
â”œâ”€â”€ customer_embeddings.pkl                  # Generated embeddings
â”œâ”€â”€ recognition_results.csv                  # Generated recognition results
â”œâ”€â”€ run_visit_tracking_hog.py                # Generates visit_log.csv
â”œâ”€â”€ visit_log.csv                             # Generated visit logs
â”œâ”€â”€ m_r_v.py                                 # Generates unique_customers.csv
â”œâ”€â”€ unique_customers.csv                      # Generated file
â”œâ”€â”€ visit_analytics.py                        # Generates daily, monthly, quarterly visits and repeat visits
â”œâ”€â”€ daily_visits.csv                          # Generated
â”œâ”€â”€ monthly_visits.csv                        # Generated
â”œâ”€â”€ quarterly_visits.csv                      # Generated
â”œâ”€â”€ repeat_visits.csv                          # Generated
â”œâ”€â”€ new_vs_returning_customers.py             # Generates customer visit counts and new/returning customers
â”œâ”€â”€ customer_visit_counts.csv                 # Generated
â”œâ”€â”€ new_customers.csv                          # Generated
â”œâ”€â”€ returning_customers.csv                   # Generated
â”œâ”€â”€ payment_and_can_analytics.py              # Generates analytics reports
â”œâ”€â”€ analytics_report.xlsx                      # Generated
â”œâ”€â”€ shop_activity_insights.xlsx                # Generated
â”œâ”€â”€ total_spend_per_customer.png               # Generated chart
â”œâ”€â”€ test_first_last_customers.csv              # Generated
â”œâ”€â”€ test_traffic_per_hour.csv                  # Generated
â”œâ”€â”€ plot_analytics_charts.py                   # Generates charts
â”œâ”€â”€ pie_vs_new_returning.png                    # Generated
â”œâ”€â”€ bar_top_customers.png                       # Generated
â”œâ”€â”€ bar_visits_per_hour.png                     # Generated
â”œâ”€â”€ line_daily_visits.png                       # Generated
â”œâ”€â”€ test_visit_tracking.py                      # Generates test visit files
â”œâ”€â”€ test_visit_counts.csv                       # Generated
â”œâ”€â”€ test_repeat_visitors.csv                    # Generated
â”œâ”€â”€ test_transaction.py                         # Generates test transaction files
â”œâ”€â”€ test_total_spent.csv                         # Generated
â”œâ”€â”€ test_payment_summary.csv                     # Generated
â”œâ”€â”€ test_unpaid.csv                              # Generated
â”œâ”€â”€ test_repeat_defaulters.csv                   # Generated
â”œâ”€â”€ test_can_shop_activity.py                    # Generates can activity reports
â”œâ”€â”€ test_can_per_customer.csv                     # Generated
â”œâ”€â”€ test_can_per_day.csv                          # Generated
â”œâ”€â”€ dashboard.py                                 # Streamlit dashboard
â”œâ”€â”€ dashboard_final.py                           # Final version of dashboard
â””â”€â”€ README.md                                    # Project description 

